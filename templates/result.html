<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player Info - {{ data.basicInfo.nickname if data.basicInfo else 'Unknown' }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="https://img.ffinfo.in/img/logo.png">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <img src="https://img.ffinfo.in/img/logo.png" alt="Free Fire Logo">
                <h1>Free Fire <span class="highlight">Player Info</span></h1>
            </div>
            <a href="/" class="btn-back">
                <i class="fas fa-arrow-left"></i> Back to Search
            </a>
        </header>

        <!-- Player Profile Section -->
        <main class="player-profile">
            <!-- Player Basic Info -->
            <div class="profile-header">
                <div class="player-avatar">
                    <div class="avatar-circle">
                        <i class="fas fa-user-secret"></i>
                    </div>
                    <div class="player-main-info">
                        <h1 class="player-name">{{ data.basicInfo.nickname if data.basicInfo else 'Unknown Player' }}</h1>
                        <div class="player-uid">
                            <span class="label">UID:</span> {{ uid }}
                            <span class="region-badge">{{ region }}</span>
                        </div>
                        
                        <div class="player-stats-summary">
                            <div class="stat-item">
                                <i class="fas fa-layer-group"></i>
                                <span class="label">Level:</span>
                                <span class="value">{{ data.basicInfo.level if data.basicInfo else 'N/A' }}</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-trophy"></i>
                                <span class="label">Rank:</span>
                                <span class="value">{{ data.basicInfo.rank if data.basicInfo else 'N/A' }}</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-heart"></i>
                                <span class="label">Likes:</span>
                                <span class="value">{{ "{:,}".format(data.basicInfo.liked) if data.basicInfo and data.basicInfo.liked else '0' }}</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn-action" onclick="window.location.href='/'">
                        <i class="fas fa-search"></i> Search Another
                    </button>
                    <button class="btn-action" onclick="shareProfile()">
                        <i class="fas fa-share-alt"></i> Share Profile
                    </button>
                    <button class="btn-action" onclick="copyUID()">
                        <i class="fas fa-copy"></i> Copy UID
                    </button>
                </div>
            </div>

            <!-- Info Sections -->
            <div class="info-sections">
                <!-- Basic Info Card -->
                <div class="info-card detailed">
                    <h2><i class="fas fa-id-card"></i> Basic Information</h2>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="label">Account Level</span>
                            <span class="value">{{ data.basicInfo.level if data.basicInfo else 'N/A' }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Current Rank</span>
                            <span class="value rank-{{ data.basicInfo.rank//100 if data.basicInfo else 0 }}">
                                {{ data.basicInfo.rank if data.basicInfo else 'N/A' }}
                            </span>
                        </div>
                        <div class="info-item">
                            <span class="label">Ranking Points</span>
                            <span class="value">{{ data.basicInfo.rankingPoints if data.basicInfo else 'N/A' }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Max Rank</span>
                            <span class="value">{{ data.basicInfo.maxRank if data.basicInfo else 'N/A' }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">CS Rank</span>
                            <span class="value">{{ data.basicInfo.csRank if data.basicInfo else 'N/A' }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">EXP</span>
                            <span class="value">{{ "{:,}".format(data.basicInfo.exp) if data.basicInfo and data.basicInfo.exp else '0' }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Account Created</span>
                            <span class="value">{{ data.basicInfo.createAt_formatted if data.basicInfo and data.basicInfo.createAt_formatted else 'N/A' }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Last Login</span>
                            <span class="value">{{ data.basicInfo.lastLoginAt_formatted if data.basicInfo and data.basicInfo.lastLoginAt_formatted else 'N/A' }}</span>
                        </div>
                        {% if data.basicInfo and data.basicInfo.days_played %}
                        <div class="info-item">
                            <span class="label">Days Played</span>
                            <span class="value">{{ data.basicInfo.days_played }}</span>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Clan Information -->
                {% if data.clanBasicInfo %}
                <div class="info-card">
                    <h2><i class="fas fa-users"></i> Clan Information</h2>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="label">Clan Name</span>
                            <span class="value">{{ data.clanBasicInfo.clanName }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Clan Level</span>
                            <span class="value">{{ data.clanBasicInfo.clanLevel }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Members</span>
                            <span class="value">{{ data.clanBasicInfo.currentMembers }}/{{ data.clanBasicInfo.maxMembers }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Clan ID</span>
                            <span class="value">{{ data.clanBasicInfo.clanId }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Captain</span>
                            <span class="value">{{ data.captainBasicInfo.nickname if data.captainBasicInfo else 'N/A' }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Captain UID</span>
                            <span class="value">{{ data.clanBasicInfo.captainId }}</span>
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Pet Information -->
                {% if data.petInfo %}
                <div class="info-card">
                    <h2><i class="fas fa-paw"></i> Pet Information</h2>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="label">Pet Level</span>
                            <span class="value">{{ data.petInfo.level }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Pet EXP</span>
                            <span class="value">{{ data.petInfo.exp }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Pet ID</span>
                            <span class="value">{{ data.petInfo.petId }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Selected Skill</span>
                            <span class="value">{{ data.petInfo.selectedSkillId }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Skin ID</span>
                            <span class="value">{{ data.petInfo.skinId }}</span>
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Profile Information -->
                {% if data.profileInfo %}
                <div class="info-card">
                    <h2><i class="fas fa-user-cog"></i> Profile Information</h2>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="label">Avatar ID</span>
                            <span class="value">{{ data.profileInfo.avatarId }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Cosmetic Items</span>
                            <span class="value">{{ data.profileInfo.cosmeticItems|length if data.profileInfo.cosmeticItems else 0 }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Equipped Skills</span>
                            <span class="value">{{ data.profileInfo.equippedSkills|length if data.profileInfo.equippedSkills else 0 }}</span>
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Social Information -->
                {% if data.socialInfo %}
                <div class="info-card">
                    <h2><i class="fas fa-comment-alt"></i> Social Information</h2>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="label">Language</span>
                            <span class="value">{{ data.socialInfo.language.replace('LANGUAGE_', '') }}</span>
                        </div>
                        <div class="info-item">
                            <span class="label">Privacy</span>
                            <span class="value">{{ data.socialInfo.privacy.replace('PRIVACY_', '') }}</span>
                        </div>
                    </div>
                    {% if data.socialInfo.socialHighlight %}
                    <div class="social-highlight">
                        <h3><i class="fas fa-quote-left"></i> Player Bio</h3>
                        <p>{{ data.socialInfo.socialHighlight }}</p>
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                <!-- Credit Score -->
                {% if data.creditScoreInfo %}
                <div class="info-card">
                    <h2><i class="fas fa-credit-card"></i> Credit Score</h2>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="label">Score</span>
                            <span class="value score-{{ data.creditScoreInfo.score//20 if data.creditScoreInfo.score else 0 }}">
                                {{ data.creditScoreInfo.score }}/100
                            </span>
                        </div>
                        <div class="info-item">
                            <span class="label">Status</span>
                            <span class="value">
                                {% if data.creditScoreInfo.score >= 80 %}
                                <span class="good">Excellent</span>
                                {% elif data.creditScoreInfo.score >= 60 %}
                                <span class="average">Good</span>
                                {% else %}
                                <span class="poor">Needs Improvement</span>
                                {% endif %}
                            </span>
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Raw JSON Data (Collapsible) -->
                <div class="info-card">
                    <h2 onclick="toggleJSON()" style="cursor: pointer;">
                        <i class="fas fa-code"></i> Raw JSON Data 
                        <span class="toggle-icon">▼</span>
                    </h2>
                    <div id="jsonData" class="json-data" style="display: none;">
                        <pre>{{ data|tojson(indent=2) }}</pre>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>© 2024 Free Fire Player Info • Data provided by <span class="highlight">SENKU CODEX API</span></p>
            <p class="disclaimer">This tool is not affiliated with Garena Free Fire. All game data belongs to Garena.</p>
            <div class="profile-actions">
                <a href="/api/player/{{ uid }}/{{ region }}" class="api-link" target="_blank">
                    <i class="fas fa-download"></i> Download JSON
                </a>
                <a href="https://t.me/raihanpaid" class="telegram-link" target="_blank">
                    <i class="fab fa-telegram"></i> Contact Developer
                </a>
            </div>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script>
        function shareProfile() {
            const url = window.location.href;
            if (navigator.share) {
                navigator.share({
                    title: 'Free Fire Player Info',
                    text: `Check out ${"{{ data.basicInfo.nickname if data.basicInfo else 'Unknown Player' }}"}'s Free Fire stats`,
                    url: url
                });
            } else {
                navigator.clipboard.writeText(url);
                alert('Profile URL copied to clipboard!');
            }
        }
        
        function copyUID() {
            navigator.clipboard.writeText("{{ uid }}");
            alert('UID copied to clipboard!');
        }
        
        function toggleJSON() {
            const jsonData = document.getElementById('jsonData');
            const toggleIcon = document.querySelector('.toggle-icon');
            
            if (jsonData.style.display === 'none') {
                jsonData.style.display = 'block';
                toggleIcon.textContent = '▲';
            } else {
                jsonData.style.display = 'none';
                toggleIcon.textContent = '▼';
            }
        }
    </script>
</body>
</html>